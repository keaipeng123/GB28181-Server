# 第三方库安装

## 1. 库预览

### 1.1 gflags

`gflags` 是 Google 开源的**命令行参数（flags）解析库**，主要用于 C++ 项目（也有其它语言的绑定/移植版本）。

- 核心用途：把程序启动参数（如 `--port=5060`、`--log_dir=/tmp/logs`）映射为程序内的全局/静态配置变量。
- 特点：
	- 支持多类型 flag（bool/int32/int64/double/string 等）
	- 自动生成 `--help` / `--helpshort` 等帮助信息
	- 统一管理默认值、参数说明、校验与读取
- 常见场景：服务端进程的端口、配置文件路径、开关选项、调试参数等。

### 1.2 glog

`glog` 是 Google 开源的 **C++ 日志库（Google Logging）**，用于输出结构化日志、控制日志级别、写入文件等。

- 核心用途：提供统一的日志 API，把运行过程中的信息按级别输出到终端/文件，便于排错与运维。
- 典型能力：
	- 日志级别：`INFO` / `WARNING` / `ERROR` / `FATAL`
	- `VLOG(n)` 细粒度调试日志（按 verbose 等级控制）
	- `CHECK` / `DCHECK` 断言（失败可直接终止并打印关键信息）
	- 可配置日志目录、文件滚动、是否同时输出到 stderr 等（具体取决于编译/配置选项）

### 1.3 二者关系（为什么经常一起出现）

- `gflags` 负责“**解析命令行参数**”，`glog` 负责“**输出日志**”。
- `glog` 常常与 `gflags` 联动：
	- 一些项目会用 `gflags` 提供 `--log_dir`、`--v` 等参数，再由 `glog` 按这些参数决定日志行为。
	- 注意：不同发行版/构建方式下，`glog` 是否强依赖 `gflags`、以及支持哪些 flags，可能会有差异。

## 2. 安装步骤

### 1.1 gflags

- 版本`glog-0.3.5`
- ` ./configure CXXFLAGS="-std=gnu++11" `生成`Makefile`文件
- `make`和`make install`将其安装到`/usr/local/include`和`/usr/local/lib`目录
- 移动`/usr/local/include/glog`和`/usr/local/lib/libglog.a`到项目目录`3rd`中
- 注意：该版本不能使用c++17标准进行编译，出现如下报错

        g++ -DHAVE_CONFIG_H -I. -I./src  -I./src       -Wall -Wwrite-strings -Woverloaded-virtual -Wno-sign-compare  -DNO_FRAME_POINTER  -g -O2 -MT src/logging_unittest-logging_unittest.o -MD -MP -MF src/.deps/logging_unittest-logging_unittest.Tpo -c -o src/logging_unittest-logging_unittest.o `test -f 'src/logging_unittest.cc' || echo './'`src/logging_unittest.cc
        In file included from src/logging_unittest.cc:58:
        src/googletest.h:579:33: error: ISO C++17 does not allow dynamic exception specifications
        579 | void* operator new(size_t size) throw(std::bad_alloc) {
            |                                 ^~~~~
        src/googletest.h:586:35: error: ISO C++17 does not allow dynamic exception specifications
        586 | void* operator new[](size_t size) throw(std::bad_alloc) {
            |                                   ^~~~~
        src/logging_unittest.cc: In function ‘void TestDCHECK()’:
        src/logging_unittest.cc:568:3: warning: ‘template<class> class std::auto_ptr’ is deprecated: use 'std::unique_ptr' instead [-Wdeprecated-declarations]
        568 |   auto_ptr<int64> sptr(new int64);
            |   ^~~~~~~~
        In file included from /usr/include/c++/11/bits/locale_conv.h:41,
                        from /usr/include/c++/11/locale:43,
                        from /usr/include/c++/11/iomanip:43,
                        from src/logging_unittest.cc:44:
        /usr/include/c++/11/bits/unique_ptr.h:57:28: note: declared here
        57 |   template<typename> class auto_ptr;
            |                            ^~~~~~~~
        make: *** [Makefile:1275: src/logging_unittest-logging_unittest.o] Error 1

### 1.2 glog

- 版本`gflags-2.2.2`
- `cmake ." `生成`Makefile`文件
- `make`和`make install`将其安装到`/usr/local/include`和`/usr/local/lib`目录
- 移动`/usr/local/include/glog`和`/usr/local/lib/libglog.a`到项目目录`3rd`中