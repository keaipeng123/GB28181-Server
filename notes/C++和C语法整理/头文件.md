
# 常用头文件整理（C / C++）

> 目标：快速知道“这个头文件主要干什么、常用 API 有哪些、注意点是什么”。

## stdio.h（标准输入输出）

**主要作用**：提供标准输入/输出与文件 I/O 能力（读写终端、读写文件、格式化输出）。

**常用内容**

- 终端输入输出
	- 输出：`printf`、`puts`、`putchar`
	- 输入：`scanf`、`getchar`
- 文件 I/O（基于 `FILE*`）
	- 打开/关闭：`fopen`、`fclose`
	- 读写：`fread`、`fwrite`、`fgets`、`fputs`、`fprintf`、`fscanf`
	- 定位/缓冲：`fseek`、`ftell`、`rewind`、`fflush`
- 常见类型/宏
	- 类型：`FILE`
	- 标准流：`stdin`、`stdout`、`stderr`

**注意点（常见坑）**

- `scanf`/`printf` 的格式化字符串要和参数类型一致，否则容易出错。
- `gets` 已被废弃/不安全（不要用），读取一行用 `fgets`。
- `stderr` 通常不缓冲或行缓冲，适合打印错误信息。
- C++ 中建议优先用 `iostream`（`std::cout/std::cin`），需要兼容 C 接口时再用 `stdio`。

**C++ 对应头文件**：`<cstdio>`（把 C 的名字放到 `std::` 命名空间里，例如 `std::printf`）

---

## stdlib.h（通用标准库/运行时工具）

**主要作用**：提供通用工具函数（动态内存、进程退出、字符串转数值、随机数、排序/查找、环境变量等）。

**常用内容**

- 动态内存
	- `malloc`、`calloc`、`realloc`、`free`
- 程序退出/异常终止
	- `exit`、`abort`
	- 退出码宏：`EXIT_SUCCESS`、`EXIT_FAILURE`
	- 退出回调：`atexit`
- 字符串转数值
	- `strtol`、`strtoul`、`strtod`（比 `atoi` 更可靠，能做错误处理）
	- `atoi`（简单但不推荐用于严肃解析）
- 随机数
	- `rand`、`srand`（质量一般；需要更好随机性通常用平台库或 C++ `<random>`）
- 排序/查找
	- `qsort`、`bsearch`
- 环境/系统（依赖实现，跨平台要谨慎）
	- `getenv`、`system`

**注意点（常见坑）**

- `malloc/calloc/realloc` 返回 `void*`：
	- C 里不需要强转；
	- C++ 里强转也不推荐（更推荐 `new/delete`，或更现代的 `std::vector/std::string/std::unique_ptr`）。
- `strtol/strtod` 解析时建议检查 `errno` 和 `endptr`，否则可能悄悄解析失败。
- `system()` 有安全与可移植性问题，非必要不使用。

**C++ 对应头文件**：`<cstdlib>`

---

## 补充：std 命名空间与 using

### 1）很多头文件的内容都在 std 里吗？

**是的**：大多数 **C++ 标准库头文件**（无 `.h` 的那种，如 `<string>`、`<vector>`、`<map>`、`<iostream>`、`<thread>`、`<mutex>`、`<chrono>`）提供的类型/函数基本都位于命名空间 `std` 下。

- 例：`<string>` 提供 `std::string`、`std::getline` 等
- 有些在子命名空间里：例如 `<filesystem>` 是 `std::filesystem::path`，`<chrono>` 是 `std::chrono::steady_clock`

### 2）`using namespace std;` 是做什么的？

作用：把 `std` 命名空间里的名字“引入到当前作用域”，从而可以省略 `std::` 前缀。

- 不写 `using namespace std;`：`std::string s;`
- 写了 `using namespace std;`：`string s;`

**注意**：一般不建议把 `using namespace std;` 写在头文件里（例如 `Common.h` 这种会被很多文件包含的头文件），因为它会影响所有包含该头文件的源码文件，可能导致命名冲突、排错困难。

更推荐：

- 头文件里直接用 `std::string` 这种全限定名；
- 或者只引入少量名字（更建议放在 `.cpp` 里）：`using std::string;`

### 3）`#include <string>` 的“命名空间”就是 std 吗？

`#include <string>` 的作用是把标准库里“字符串相关的声明”引入进来，使编译器认识 `std::string` 等符号。

- 它不会“创建命名空间”，但它引入的这些符号通常位于 `std` 命名空间里。

### 4）C 头文件与 C++ 版本头文件（`<xxx.h>` vs `<cxxx>`）

- 传统 C 头文件：`<stdio.h>`、`<stdlib.h>` 等
	- 在 C 语言里没有 `std` 命名空间概念
	- 在 C++ 里也能用，但符号可能在全局命名空间（实现相关）
- C++ 对应版本：`<cstdio>`、`<cstdlib>` 等
	- 标准库通常把符号放在 `std::` 下（例如 `std::printf`、`std::malloc`）
	- 许多实现为了兼容，也可能同时在全局命名空间再提供一份


